<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linux | $whois andyregan]]></title>
  <link href="http://andyregan.net/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://andyregan.net/"/>
  <updated>2013-01-09T15:15:43+00:00</updated>
  <id>http://andyregan.net/</id>
  <author>
    <name><![CDATA[Andrew Regan]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Recovering Files From an Unmountable USB Key]]></title>
    <link href="http://andyregan.net/recovering-files-from-an-unmountable-usb-key/"/>
    <updated>2009-02-28T00:00:00+00:00</updated>
    <id>http://andyregan.net/recovering-files-from-an-unmountable-usb-key</id>
    <content type="html"><![CDATA[<p>The other night, myself and Rory managed to recover his friend's thesis from a wonky USB thumb drive. We used <a href="http://www.cgsecurity.org/wiki/PhotoRec">PhotoRec</a> on Ubuntu Linux.
PhotoRec comes with the TestDisk utility. You can install TestDisk via:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$apt</span>-get update
</span><span class='line'><span class="nv">$apt</span>-get install testdisk
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>The first thing we did was run <strong>dmesg</strong> in a terminal to get a bit of info on what was going on. We ran dmesg before and after we plugged
in the drive and noted the relevant output. The device eventually settled and was given the device location sdb by the kernel, but no
filesystem was found.
The partition was likely corrupted somehow.</p>

<p>TestDisk could be used to try to repair the partition on the disk, but it could also damage the data further. We decided to make an image to work with using <strong>dd</strong>:</p>

<p><strong>Use dd with care! Consult the man page for more info.</strong>
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$sudo</span> dd <span class="k">if</span><span class="o">=</span>/dev/sdb <span class="nv">ou</span><span class="o">=</span>./disk_image
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>This copied the contents of the usb key block-by-block to a file called "disk_image". The was a 2G image (the total capacity) of the wonky drive.</p>

<p>We then used <strong>photorec</strong> to try to recover any files from the image.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$photorec</span> ./disk_image
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Select the image to use.</p>

<p><img src="/images/posts/recovering-files-from-an-unmountable-usb-key/photorec1.png" title="Select the image to use" ></p>

<p>Select the partition type.</p>

<p><img src="/images/posts/recovering-files-from-an-unmountable-usb-key/photorec2.png" title="Select the partition type" ></p>

<p>Select the partition.</p>

<p><img src="/images/posts/recovering-files-from-an-unmountable-usb-key/photorec3.png" title="Select the partition" ></p>

<p>Select the filesystem type.</p>

<p><img src="/images/posts/recovering-files-from-an-unmountable-usb-key/photorec4.png" title="Select the filesystem type" ></p>

<p>Select where to save the recovered files.</p>

<p><img src="/images/posts/recovering-files-from-an-unmountable-usb-key/photorec5.png" title="Select where to save the recoverd files" ></p>

<p>Watch the search in progress.</p>

<p><img src="/images/posts/recovering-files-from-an-unmountable-usb-key/photorec6.png" title="Search in progress" ></p>

<p>Et voila! PhotoRec worked its magic and we recovered the thesis, along with all the other files.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Webcam Motion Detection in Ubuntu Linux]]></title>
    <link href="http://andyregan.net/webcam-motion-detection-in-ubuntu-linux/"/>
    <updated>2009-02-26T00:00:00+00:00</updated>
    <id>http://andyregan.net/webcam-motion-detection-in-ubuntu-linux</id>
    <content type="html"><![CDATA[<p>I bought a cheap usb webcam to add to the list of devices for my fyp. The idea is to push presence updates when motion is detected. I'll be using <a href="http://www.lavrsen.dk/twiki/bin/view/Motion/WebHome">Motion</a> to handle motion detection.
Detailed <a href="http://infectedproject.com/2008/04/11/how-to-part-1-cheap-ubuntu-based-home-security/">installation and configuration instructions</a> can be found at InfectedProject.</p>

<p>You can set motion to run commands when certain events happen, such as an image is saved or a movie ends. For example, you could add the following to <strong>/etc/motion/motion.conf</strong> so that you get an email to you're email account when a movie ends.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>montion config </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Command to be executed when a movie file <span class="o">(</span>.mpg|.avi<span class="o">)</span> is closed. <span class="o">(</span>default: none<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;To give the filename as an argument to a <span class="nb">command </span>append it with %f&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;on_movie_end <span class="nb">echo</span> %f | mutt -s <span class="s2">&quot;[Motion]&quot;</span> -a %f joe@bloggs.com
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing Subclipse in Ubuntu Behind a Proxy]]></title>
    <link href="http://andyregan.net/installing-subclipse-in-ubuntu-behind-a-proxy/"/>
    <updated>2009-02-25T00:00:00+00:00</updated>
    <id>http://andyregan.net/installing-subclipse-in-ubuntu-behind-a-proxy</id>
    <content type="html"><![CDATA[<p>Took me ages to figure this out. I followed these <a href="https://help.ubuntu.com/community/EclipseSubversion">instructions on how to install Subclise</a>. After I added the remote site and hit "Finish" the installer just timed out. I was working behind a firewall (IT LABS!) so I figured proxy settings had something to do with my problems.</p>

<p>Long story short, Eclipse doesn't use your global proxy settings. In Ubuntu, the location of the settings in Eclipse is <strong>Window->Preferences->Install &amp; Update</strong>.</p>

<p>From there, you can specify your proxy host and port and successfully install <a href="http://subclipse.tigris.org/">Subclipse</a>.</p>

<p>Subclipse is a Subversion plugin for eclipse. Thanks to Nathan for helping me find the settings!</p>
]]></content>
  </entry>
  
</feed>
